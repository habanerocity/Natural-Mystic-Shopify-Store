<div class="container">
    <section class="row content-justify-center my-5" id="product_recommendation">
        <div class="text-center">
            <h1>
                Related Items
            </h1>
            <div class="row" id="product_recommendation_body"></div>
        </div>
    </section>
</div>

<script>
    let productRecommendationBody = document.getElementById("product_recommendation_body");

    fetch("/recommendations/products.json?product_id={{ product.id }}").then((res) => res.json()).then(({products}) => {
        console.log(products);

        if (products.length > 0) {
            products.forEach(function (product, index) {
                let card;

                card = "<div class=\"flex_container col-auto col-sm-12 col-md-3 g-3\">";
                card += "<div class=\"card\" style=\"width: 18rem;\">";
                if (product.images.length > 0) {
                    card += "<img class=\"card-img-top card-img-size\" src=\"" + product.images[0] + "\">";
                }
                card += "<div class=\"card-body\">";
                card += "<h3><a href=\"" + product.url + "\">" + product.title + "</h3>";
                card += "</div></div>";

                productRecommendationBody.innerHTML += card;
            })
        }
    });
</script>